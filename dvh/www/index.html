<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: https://ssl.gstatic.com http://localhost:* https://* 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; connect-src 'self' http://localhost:* https://*;">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
        <meta name="color-scheme" content="light dark">
        <link rel="stylesheet" href="css/index.css">
        <title>Sistema de Fichas RPG - Deuses versus Humanos</title>
    </head>
    <body>
        <div class="app-container">
            <!-- Menu de NavegaÃ§Ã£o -->
            <nav class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h1>ğŸ² RPG Sistema</h1>
                    <p class="subtitle">Deuses vs Humanos</p>
                </div>
                <ul class="nav-menu">
                    <li><a href="#" data-page="home" class="nav-item">ğŸ  Home</a></li>
                    <li><a href="#" data-page="ficha" class="nav-item active">ğŸ“ Ficha</a></li>
                    <li><a href="#" data-page="racas" class="nav-item">ğŸ‘¥ RaÃ§as</a></li>
                    <li><a href="#" data-page="classes" class="nav-item">âš”ï¸ Classes</a></li>
                    <li><a href="#" data-page="origens" class="nav-item">ğŸŒ Origens</a></li>
                    <li><a href="#" data-page="atributos" class="nav-item">ğŸ’ª Atributos</a></li>
                    <li><a href="#" data-page="base" class="nav-item">ğŸ“Š Base</a></li>
                    <li><a href="#" data-page="pericias" class="nav-item">ğŸ¯ PerÃ­cias</a></li>
                    <li><a href="#" data-page="habilidades" class="nav-item">âœ¨ Habilidades</a></li>
                    <li><a href="#" data-page="magias" class="nav-item">ğŸ”® Magias</a></li>
                    <li><a href="#" data-page="armas" class="nav-item">âš”ï¸ Armas</a></li>
                    <li><a href="#" data-page="itens" class="nav-item">ğŸ’ Itens</a></li>
                    <li><a href="#" data-page="criacao-personagens" class="nav-item">ğŸ‘¤ CriaÃ§Ã£o de Personagens</a></li>
                    <li><a href="#" data-page="criacao-mapas" class="nav-item">ğŸ—ºï¸ CriaÃ§Ã£o de Mapas</a></li>
                    <li><a href="#" data-page="musicas-sons" class="nav-item">ğŸµ MÃºsicas e Sons</a></li>
                    <li><a href="#" data-page="jogos" class="nav-item">ğŸ® Jogos</a></li>
                    <li><a href="#" data-page="mecanicas" class="nav-item">âš™ï¸ MecÃ¢nicas</a></li>
                    <li><a href="#" data-page="efeitos" class="nav-item">ğŸ’« Efeitos</a></li>
                    <li><a href="#" data-page="bestiario" class="nav-item">ğŸ‰ BestiÃ¡rio</a></li>
                    <li><a href="#" data-page="materiais" class="nav-item">ğŸ“¦ Materiais</a></li>
                </ul>
            </nav>

            <!-- BotÃ£o para toggle do menu (mobile) -->
            <button class="menu-toggle" id="menuToggle">â˜°</button>

            <!-- BotÃ£o de Modo Escuro -->
            <button class="dark-mode-toggle" id="darkModeToggle" title="Alternar modo escuro">
                <span class="dark-mode-icon"></span>
            </button>

            <!-- ConteÃºdo Principal -->
            <main class="main-content">
                <!-- PÃ¡gina: Inicial (Home) -->
                <div id="page-home" class="page active">
                    <div class="welcome-container">
                        <div class="welcome-header">
                            <h1 class="welcome-title">Bem-vindo ao Sistema dos Deuses</h1>
                            <p class="welcome-subtitle">Escolha uma das opÃ§Ãµes abaixo para navegar pelo sistema.</p>
                        </div>
                        
                        <div class="info-box">
                            <p class="info-text">
                                A ficha Ã© completamente automatizada, entÃ£o ela se auto-completarÃ¡. Para procurar e ver mais informaÃ§Ãµes sobre alguma coisa, entre na pÃ¡gina desejada, jÃ¡ que a ficha apresenta apenas um pequeno resumo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Barra de NavegaÃ§Ã£o Inferior -->
                <nav class="bottom-nav" id="bottomNav">
                    <div class="nav-row">
                        <button class="nav-btn" data-page="ficha">ğŸ“ Ficha</button>
                        <button class="nav-btn" data-page="atributos">ğŸ’ª Atributos</button>
                        <button class="nav-btn" data-page="racas">ğŸ‘¥ RaÃ§as</button>
                        <button class="nav-btn" data-page="origens">ğŸŒ Origens</button>
                        <button class="nav-btn" data-page="classes">âš”ï¸ Classes</button>
                        <button class="nav-btn" data-page="itens">ğŸ’ Itens</button>
                        <button class="nav-btn" data-page="armas">âš”ï¸ Armas</button>
                        <button class="nav-btn" data-page="criacao-personagens">ğŸ‘¤ CriaÃ§Ã£o de Personagem</button>
                    </div>
                    <div class="nav-row">
                        <button class="nav-btn" data-page="criacao-mapas">ğŸ—ºï¸ CriaÃ§Ã£o de Mapas</button>
                        <button class="nav-btn" data-page="musicas-sons">ğŸµ MÃºsicas e Sons</button>
                        <button class="nav-btn" data-page="jogos">ğŸ® Jogos</button>
                        <button class="nav-btn" data-page="mecanicas">âš™ï¸ MecÃ¢nicas</button>
                        <button class="nav-btn" data-page="efeitos">ğŸ’« Efeitos</button>
                        <button class="nav-btn" data-page="pericias">ğŸ¯ PerÃ­cias</button>
                        <button class="nav-btn" data-page="bestiario">ğŸ‰ BestiÃ¡rio</button>
                        <button class="nav-btn" data-page="materiais">ğŸ“¦ Materiais</button>
                    </div>
                </nav>

                <!-- PÃ¡gina: Ficha -->
                <div id="page-ficha" class="page">
                    <div class="page-header">
                        <h2>ğŸ“ Fichas de Personagem</h2>
                    </div>
                    <div class="tabs">
                        <button class="tab-btn active" onclick="showTab('criar')">Criar Ficha</button>
                        <button class="tab-btn" onclick="showTab('listar')">Listar Fichas</button>
                    </div>

                    <!-- Tab: Criar Ficha -->
                    <div id="criar-ficha" class="tab-content active">
                        <form id="ficha-form" class="ficha-form">
                            <div class="form-section">
                                <h2>InformaÃ§Ãµes BÃ¡sicas</h2>
                                <!-- Linha 1: Nome (largura completa) -->
                                <div style="display: grid; grid-template-columns: 1fr; gap: 16px; margin-bottom: 16px;">
                                    <div class="form-group">
                                        <label for="nome">Nome do Personagem *</label>
                                        <input type="text" id="nome" name="nome" required>
                                    </div>
                                </div>
                                
                                <!-- Linha 2: Idade e Data de Nascimento -->
                                <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 16px; margin-bottom: 16px;">
                                    <div class="form-group">
                                        <label for="idade">Idade *</label>
                                        <input type="text" id="idade" name="idade" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="data_nascimento">Data de Nascimento *</label>
                                        <input type="text" id="data_nascimento" name="data_nascimento" required>
                                    </div>
                                </div>
                                
                                <!-- Linha 3: Altura, Sexualidade e Tipo SanguÃ­neo -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                                    <div class="form-group">
                                        <label for="altura">Altura *</label>
                                        <input type="text" id="altura" name="altura" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="sexualidade">Sexualidade *</label>
                                        <input type="text" id="sexualidade" name="sexualidade" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="tipo_sanguineo">Tipo SanguÃ­neo *</label>
                                        <input type="text" id="tipo_sanguineo" name="tipo_sanguineo" required>
                                    </div>
                                </div>
                                
                                <!-- NÃ­vel -->
                                <div class="form-group">
                                    <label for="nivel">NÃ­vel (%) *</label>
                                    <div class="nivel-container">
                                        <input type="range" id="nivel-slider" name="nivel-slider" min="0" max="100" value="0" step="1">
                                        <input type="number" id="nivel" name="nivel" min="0" max="100" value="0" required>
                                    </div>
                                    <small class="form-hint">NÃ­vel de 0% a 100%</small>
                                </div>
                            </div>

                            <div class="form-section">
                                <h2>ğŸ“Š EstatÃ­sticas</h2>
                                <!-- Status Vitais em Grid 2x2 -->
                                <div class="stats-grid" style="grid-template-columns: repeat(2, 1fr); margin-bottom: 24px;">
                                    <div class="form-group">
                                        <label>â¤ï¸ Vida</label>
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                            <input type="number" id="vida-atual" name="vida-atual" min="0" value="10" required style="flex: 1; text-align: center;">
                                            <span style="font-weight: bold; color: #666;">/</span>
                                            <input type="number" id="vida-total" name="vida-total" min="1" value="10" required readonly style="flex: 1; text-align: center; background: #f5f5f5;">
                                        </div>
                                        <small class="form-hint">ResiliÃªncia Ã— 3 + 10</small>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>ğŸ’¬ Sanidade</label>
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                            <input type="number" id="sanidade-atual" name="sanidade-atual" min="0" value="0" required style="flex: 1; text-align: center;">
                                            <span style="font-weight: bold; color: #666;">/</span>
                                            <input type="number" id="sanidade-total" name="sanidade-total" min="0" value="0" required readonly style="flex: 1; text-align: center; background: #f5f5f5;">
                                        </div>
                                        <small class="form-hint">Intelecto Ã— 5 + Carisma Ã— 3 + 10</small>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>âš¡ Mana</label>
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                            <input type="number" id="mana-atual" name="mana-atual" min="0" value="0" required style="flex: 1; text-align: center;">
                                            <span style="font-weight: bold; color: #666;">/</span>
                                            <input type="number" id="mana-total" name="mana-total" min="0" value="0" required readonly style="flex: 1; text-align: center; background: #f5f5f5;">
                                        </div>
                                        <small class="form-hint">Magia Ã— 5 + 15</small>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>â­ Alma</label>
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                            <input type="number" id="alma-atual" name="alma-atual" min="0" value="0" required style="flex: 1; text-align: center;">
                                            <span style="font-weight: bold; color: #666;">/</span>
                                            <input type="number" id="alma-total" name="alma-total" min="0" value="0" required readonly style="flex: 1; text-align: center; background: #f5f5f5;">
                                        </div>
                                        <small class="form-hint">Magia Ã— 5 + ResiliÃªncia Ã— 3 + Intelecto Ã— 2 + 15</small>
                                    </div>
                                </div>
                                
                                <!-- Status de Combate e InformaÃ§Ãµes do Personagem lado a lado -->
                                <div class="stats-grid" style="grid-template-columns: repeat(2, 1fr);">
                                    <!-- Status de Combate (coluna esquerda) -->
                                    <div>
                                        <h3 style="margin: 0 0 16px 0; font-size: 1.1em; color: #333;">Status de Combate</h3>
                                        <div class="form-group">
                                            <label for="defesa">Defesa</label>
                                            <input type="number" id="defesa" name="defesa" min="0" value="0" required readonly>
                                            <small class="form-hint">ConstituiÃ§Ã£o + 10</small>
                                        </div>
                                        <div class="form-group">
                                            <label for="esquiva">Esquiva</label>
                                            <input type="number" id="esquiva" name="esquiva" min="0" value="0" required readonly>
                                            <small class="form-hint">Defesa + PerÃ­cia Reflexos + Destreza</small>
                                        </div>
                                        <div class="form-group">
                                            <label for="bloqueio">Bloqueio</label>
                                            <input type="number" id="bloqueio" name="bloqueio" min="0" value="0" required readonly>
                                            <small class="form-hint">ConstituiÃ§Ã£o Ã— 2 + Metade da Fortitude</small>
                                        </div>
                                    </div>
                                    
                                    <!-- SeleÃ§Ã£o de Classe, RaÃ§a e Origem (coluna direita) -->
                                    <div>
                                        <h3 style="margin: 0 0 16px 0; font-size: 1.1em; color: #333;">InformaÃ§Ãµes do Personagem</h3>
                                        <div class="form-group classe-group">
                                            <label for="classe">Classe *</label>
                                            <div class="origem-controls">
                                                <select id="classe" name="classe" required>
                                                    <option value="">Carregando...</option>
                                                </select>
                                                <button type="button" id="btn-escolher-classe-bonus" class="btn btn-secondary" style="margin-left:8px; display:none;" disabled>Escolher bÃ´nus</button>
                                            </div>
                                            <div id="classe-escolha-hint" class="form-hint" style="margin-top:6px;color:#666;font-size:0.9em;"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="raca">RaÃ§a *</label>
                                            <select id="raca" name="raca" required>
                                                <option value="">Carregando...</option>
                                            </select>
                                        </div>
                                        <div class="form-group origem-group">
                                            <label for="origem">Origem *</label>
                                            <div class="origem-controls">
                                                <select id="origem" name="origem" required>
                                                    <option value="">Carregando...</option>
                                                </select>
                                                <button type="button" id="btn-escolher-origem-pericias" class="btn btn-secondary" style="margin-left:8px; display:none;" disabled>Escolher perÃ­cias</button>
                                            </div>
                                            <div id="origem-escolha-hint" class="form-hint" style="margin-top:6px;color:#666;font-size:0.9em;"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Campo oculto para manter compatibilidade com cÃ¡lculos -->
                                <input type="hidden" id="inventario" name="inventario" value="0">
                                <input type="hidden" id="bonus-bolsa" name="bonus-bolsa" value="0">
                            </div>

                            <div class="form-section atributos-pares">
                                <div class="atributos-col">
                                    <h2 style="margin-top:0">ğŸ² Atributos de Teste <span id="contador-atributos-teste" style="font-weight:normal;font-size:0.9em;margin-left:12px;color:#444"></span></h2>
                                    <p class="form-hint">Valores de -5 a +5 (clique no nome para testar)</p>
                                    <div class="atributos-grid-ficha" id="atributos-teste-ficha">
                                        <!-- SerÃ¡ preenchido por JavaScript -->
                                    </div>
                                </div>
                                <div class="atributos-col">
                                    <h2 style="margin-top:0">âœ¨ Atributos de Sorte <span id="contador-atributos-sorte" style="font-weight:normal;font-size:0.9em;margin-left:12px;color:#444"></span></h2>
                                    <p class="form-hint">Valores de -5 a +5 (clique no nome para testar)</p>
                                    <div class="atributos-grid-ficha" id="atributos-sorte-ficha">
                                        <!-- SerÃ¡ preenchido por JavaScript -->
                                    </div>
                                </div>
                            </div>

                            <!-- Ãrea de Resultado na Ficha -->
                            <div id="resultado-rolagem-ficha" class="resultado-rolagem" style="display: none;">
                                <h4>ğŸ“Š Resultado do Teste</h4>
                                <div id="resultado-conteudo-ficha"></div>
                            </div>

                            <div class="form-section">
                                <h2>ğŸ¯ PerÃ­cias</h2>
                                <p style="color:#ff9800; font-size:13px; margin:0 0 8px 0;">
                                    <strong>D6 Ativos:</strong> <span id="contador-pericias-d6-ficha" style="color:#4caf50; font-weight:bold;">0/10</span>
                                </p>
                                <p style="color:#9c27b0; font-size:13px; margin:0 0 12px 0;">
                                    <strong>Dados Adicionais:</strong> <span id="contador-dados-adicionais-ficha" style="color:#4caf50; font-weight:bold;">-</span>
                                </p>
                                <div id="pericias-ficha">
                                    <!-- SerÃ¡ preenchido por JavaScript -->
                                </div>
                            </div>

                            <!-- Ãrea de Resultado de PerÃ­cias na Ficha -->
                            <div id="resultado-rolagem-pericias-ficha" class="resultado-rolagem" style="display: none;">
                                <h4>ğŸ“Š Resultado do Teste de PerÃ­cia</h4>
                                <div id="resultado-conteudo-pericias-ficha"></div>
                            </div>

                            <div class="form-section">
                                <h2>ğŸ’ InventÃ¡rio</h2>
                                <div class="form-group">
                                    <div class="inventario-header" style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: #f5f5f5; border-radius: 8px; transition: background 0.2s;" onclick="abrirModalInventario()">
                                        <span style="font-size: 24px;">ğŸ’</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; font-size: 16px;">InventÃ¡rio</div>
                                            <div style="font-size: 14px; color: #666;">
                                                <span id="inventario-usado">0</span>/<span id="inventario-total-display">0</span> espaÃ§os ocupados
                                            </div>
                                        </div>
                                        <button type="button" class="btn btn-primary" style="pointer-events: none;">Abrir InventÃ¡rio</button>
                                    </div>
                                    <small class="form-hint">Clique para gerenciar seus itens, armas e equipamentos</small>
                                </div>
                            </div>

                            <div class="form-section">
                                <h2>InformaÃ§Ãµes Adicionais</h2>
                                <div class="form-group">
                                    <label for="historia">HistÃ³ria do Personagem</label>
                                    <textarea id="historia" name="historia" rows="4" placeholder="Conte a histÃ³ria do seu personagem..."></textarea>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Salvar Ficha</button>
                                <button type="button" id="btn-reset-total" class="btn btn-secondary" title="Apaga todas as informaÃ§Ãµes da ficha (atributos, perÃ­cias, seleÃ§Ãµes, nÃ­vel, inventÃ¡rio e estatÃ­sticas)">Apagar Tudo</button>
                            </div>

                            <div id="mensagem" class="mensagem"></div>
                        </form>
                    </div>

                    <!-- Tab: Listar Fichas -->
                    <div id="listar-fichas" class="tab-content">
                        <div class="fichas-container">
                            <div id="fichas-list" class="fichas-list">
                                <p class="loading">Carregando fichas...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PÃ¡gina: RaÃ§as -->
                <div id="page-racas" class="page">
                    <div class="page-header">
                        <h2>ğŸ‘¥ RaÃ§as</h2>
                        <p>Explore todas as raÃ§as disponÃ­veis no sistema</p>
                    </div>
                    <div id="racas-content" class="data-grid">
                        <p class="loading">Carregando raÃ§as...</p>
                    </div>
                </div>

                <!-- PÃ¡gina: Detalhes de RaÃ§a -->
                <div id="page-raca-detail" class="page">
                    <div class="page-header">
                        <button class="btn btn-secondary" onclick="Router.navigate('racas')">â† Voltar para RaÃ§as</button>
                        <h2 id="raca-detail-title">ğŸ‘¥ Detalhes da RaÃ§a</h2>
                    </div>
                    <div id="raca-detail-content" class="detail-container">
                        <p class="loading">Carregando detalhes...</p>
                    </div>
                </div>

                <!-- PÃ¡gina: Classes -->
                <div id="page-classes" class="page">
                    <div class="page-header">
                        <h2>âš”ï¸ Classes</h2>
                        <p>Explore todas as classes disponÃ­veis no sistema</p>
                    </div>
                    <div id="classes-content" class="data-grid">
                        <p class="loading">Carregando classes...</p>
                    </div>
                </div>

                <!-- PÃ¡gina: Detalhes de Classe -->
                <div id="page-classe-detail" class="page">
                    <div class="page-header">
                        <button class="btn btn-secondary" onclick="Router.navigate('classes')">â† Voltar para Classes</button>
                        <h2 id="classe-detail-title">âš”ï¸ Detalhes da Classe</h2>
                    </div>
                    <div id="classe-detail-content" class="detail-container">
                        <p class="loading">Carregando detalhes...</p>
                    </div>
                </div>

                <!-- PÃ¡gina: Origens -->
                <div id="page-origens" class="page">
                    <div class="page-header">
                        <h2>ğŸŒ Origens</h2>
                        <p>Explore todas as origens disponÃ­veis no sistema</p>
                    </div>
                    <div id="origens-content" class="data-grid">
                        <p class="loading">Carregando origens...</p>
                    </div>
                </div>

                <!-- PÃ¡gina: Detalhes de Origem -->
                <div id="page-origem-detail" class="page">
                    <div class="page-header">
                        <button class="btn btn-secondary" onclick="Router.navigate('origens')">â† Voltar para Origens</button>
                        <h2 id="origem-detail-title">ğŸŒ Detalhes da Origem</h2>
                    </div>
                    <div id="origem-detail-content" class="detail-container">
                        <p class="loading">Carregando detalhes...</p>
                    </div>
                </div>

                <!-- PÃ¡gina: Atributos -->
                <div id="page-atributos" class="page">
                    <div class="page-header">
                        <h2>ğŸ’ª Atributos</h2>
                        <p>Clique no nome de um atributo para fazer um teste (rolagem de dados)</p>
                    </div>
                    <div class="atributos-container">
                        <div class="atributos-section">
                            <h3 class="section-title">ğŸ² Atributos de Teste</h3>
                            <div class="atributos-grid" id="atributos-teste">
                                <!-- SerÃ¡ preenchido por JavaScript -->
                            </div>
                        </div>
                        
                        <div class="atributos-section">
                            <h3 class="section-title">âœ¨ Atributos de Sorte</h3>
                            <div class="atributos-grid" id="atributos-sorte">
                                <!-- SerÃ¡ preenchido por JavaScript -->
                            </div>
                        </div>

                        <!-- Ãrea de Resultado -->
                        <div id="resultado-rolagem" class="resultado-rolagem" style="display: none;">
                            <h4>ğŸ“Š Resultado do Teste</h4>
                            <div id="resultado-conteudo"></div>
                        </div>
                    </div>
                </div>

                <div id="page-base" class="page">
                    <div class="page-header">
                        <h2>ğŸ“Š Base</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o Base em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-pericias" class="page">
                    <div class="page-header">
                        <h2>ğŸ¯ PerÃ­cias</h2>
                        <p>Clique no nome de uma perÃ­cia para fazer um teste (usa atributo base + bÃ´nus de perÃ­cia)</p>
                        <p style="color:#ff9800; font-size:14px; margin:8px 0 0 0;">
                            <strong>D6 Ativos:</strong> <span id="contador-pericias-d6" style="color:#4caf50; font-weight:bold;">0/10</span>
                        </p>
                        <p style="color:#9c27b0; font-size:14px; margin:4px 0 0 0;">
                            <strong>Dados Adicionais:</strong> <span id="contador-dados-adicionais" style="color:#4caf50; font-weight:bold;">-</span>
                        </p>
                    </div>
                    <div class="pericias-container">
                        <div id="pericias-content">
                            <!-- SerÃ¡ preenchido por JavaScript -->
                        </div>
                        
                        <!-- Ãrea de Resultado -->
                        <div id="resultado-rolagem-pericias" class="resultado-rolagem" style="display: none;">
                            <h4>ğŸ“Š Resultado do Teste</h4>
                            <div id="resultado-conteudo-pericias"></div>
                        </div>
                    </div>
                </div>

                <!-- Modal: Escolher PerÃ­cias -->
                <div id="modal-escolher-pericias" class="modal" style="display:none; position:fixed; left:0; top:0; right:0; bottom:0; background:rgba(0,0,0,0.5); align-items:center; justify-content:center; z-index:9999;">
                    <div class="modal-content" style="background:#fff; padding:16px; width:90%; max-width:700px; border-radius:8px; max-height:80%; overflow:auto;">
                        <div class="modal-header" style="display:flex; justify-content:space-between; align-items:center;">
                            <h3 id="modal-escolher-title">Escolher PerÃ­cias</h3>
                            <button type="button" id="modal-escolher-close" class="btn">âœ–</button>
                        </div>
                        <div class="modal-body">
                            <p id="modal-escolher-desc">Escolha as perÃ­cias desejadas.</p>
                            <input type="search" id="modal-escolher-search" placeholder="Buscar perÃ­cias por nome..." style="width:100%; padding:8px; margin:8px 0; box-sizing:border-box;">
                            <div id="modal-escolher-list" style="display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:8px;"></div>
                        </div>
                        <div class="modal-footer" style="display:flex; justify-content:flex-end; gap:8px; margin-top:12px;">
                            <button type="button" id="modal-escolher-cancel" class="btn btn-secondary">Cancelar</button>
                            <button type="button" id="modal-escolher-confirm" class="btn btn-primary">Confirmar escolha</button>
                        </div>
                    </div>
                </div>

                <!-- Modal: Resultado de Atributo (Overlay) -->
                <div id="modal-resultado-atributo" class="modal" style="display:none; position:fixed; left:0; top:0; right:0; bottom:0; background:rgba(0,0,0,0.75); align-items:center; justify-content:center; z-index:10000;">
                    <div class="modal-content" style="background:#111; color:#fff; padding:18px; width:90%; max-width:520px; border-radius:10px; text-align:center;">
                        <div style="font-size:48px; margin-bottom:8px;">ğŸ²</div>
                        <h3 id="modal-resultado-titulo" style="margin:0 0 8px 0;"></h3>
                        <div id="modal-resultado-corpo" style="font-size:16px; line-height:1.4;">
                        </div>
                        <div style="margin-top:12px;">
                            <button id="modal-resultado-fechar" class="btn btn-primary">Fechar</button>
                        </div>
                    </div>
                </div>

                <!-- Modal: InventÃ¡rio -->
                <div id="modal-inventario" class="modal" style="display:none; position:fixed; left:0; top:0; right:0; bottom:0; background:rgba(0,0,0,0.5); align-items:center; justify-content:center; z-index:9999;">
                    <div class="modal-content" style="background:#fff; padding:20px; width:95%; max-width:900px; border-radius:12px; max-height:85%; overflow:auto;">
                        <div class="modal-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
                            <div>
                                <h3 style="margin:0;">ğŸ’ InventÃ¡rio</h3>
                                <p style="margin:4px 0 0 0; color:#666; font-size:14px;">
                                    <span id="modal-inventario-usado">0</span>/<span id="modal-inventario-total">0</span> espaÃ§os ocupados
                                </p>
                            </div>
                            <button type="button" id="modal-inventario-close" class="btn" style="font-size:20px; padding:4px 12px;">âœ–</button>
                        </div>
                        
                        <div class="modal-body">
                            <!-- ConfiguraÃ§Ã£o de BÃ´nus de Bolsa -->
                            <div style="background:#f0f8ff; padding:12px; border-radius:8px; margin-bottom:16px;">
                                <label for="modal-bonus-bolsa" style="display:block; margin-bottom:6px; font-weight:bold; font-size:14px;">ğŸ’ BÃ´nus de Capacidade (itens especiais):</label>
                                <input type="number" id="modal-bonus-bolsa" min="0" value="0" style="width:100px; padding:6px; border:1px solid #ddd; border-radius:4px;">
                                <small style="color:#666; display:block; margin-top:4px;">Aumenta a capacidade total do inventÃ¡rio</small>
                            </div>
                            
                            <!-- CatÃ¡logo de Itens -->
                            <div id="catalogo-container" style="margin-bottom:18px;">
                                <h4 style="margin:0 0 8px 0;">ğŸ“š CatÃ¡logo de Itens</h4>
                                <input type="search" id="catalogo-busca" placeholder="ğŸ” Buscar item por nome..." style="width:100%; padding:8px; margin-bottom:12px; border:1px solid #ddd; border-radius:6px; box-sizing:border-box;">
                                <div id="catalogo-itens" style="display:grid; gap:12px;">
                                    <!-- SeÃ§Ãµes por categoria serÃ£o renderizadas via JS -->
                                </div>
                            </div>
                            
                            <!-- Abas de Categorias -->
                            <div class="inventario-tabs" style="display:flex; gap:8px; margin-bottom:16px; flex-wrap:wrap;">
                                <button type="button" class="inventario-tab-btn active" data-categoria="todos" style="padding:8px 16px; border:1px solid #ddd; background:#4CAF50; color:white; border-radius:6px; cursor:pointer; font-size:14px;">ğŸ“¦ Todos</button>
                                <button type="button" class="inventario-tab-btn" data-categoria="armas" style="padding:8px 16px; border:1px solid #ddd; background:#f5f5f5; border-radius:6px; cursor:pointer; font-size:14px;">âš”ï¸ Armas</button>
                                <button type="button" class="inventario-tab-btn" data-categoria="itens-comuns" style="padding:8px 16px; border:1px solid #ddd; background:#f5f5f5; border-radius:6px; cursor:pointer; font-size:14px;">ğŸ”§ Itens Comuns</button>
                                <button type="button" class="inventario-tab-btn" data-categoria="itens-raca" style="padding:8px 16px; border:1px solid #ddd; background:#f5f5f5; border-radius:6px; cursor:pointer; font-size:14px;">ğŸ‘¥ Itens de RaÃ§a</button>
                                <button type="button" class="inventario-tab-btn" data-categoria="itens-classe" style="padding:8px 16px; border:1px solid #ddd; background:#f5f5f5; border-radius:6px; cursor:pointer; font-size:14px;">âš”ï¸ Itens de Classe</button>
                                <button type="button" class="inventario-tab-btn" data-categoria="itens-origem" style="padding:8px 16px; border:1px solid #ddd; background:#f5f5f5; border-radius:6px; cursor:pointer; font-size:14px;">ğŸŒ Itens de Origem</button>
                            </div>

                            <!-- BotÃ£o Adicionar Novo Item -->
                            <div style="margin-bottom:16px;">
                                <button type="button" id="btn-adicionar-item" class="btn btn-primary" style="width:100%;">â• Adicionar Novo Item</button>
                            </div>

                            <!-- Lista de Itens -->
                            <div id="inventario-lista" style="display:grid; gap:12px;">
                                <!-- Itens serÃ£o adicionados aqui -->
                            </div>
                        </div>
                        
                        <div class="modal-footer" style="display:flex; justify-content:flex-end; margin-top:16px;">
                            <button type="button" id="modal-inventario-fechar" class="btn btn-primary">Fechar</button>
                        </div>
                    </div>
                </div>

                <!-- Modal: Adicionar/Editar Item -->
                <div id="modal-item" class="modal" style="display:none; position:fixed; left:0; top:0; right:0; bottom:0; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; z-index:10000;">
                    <div class="modal-content" style="background:#fff; padding:20px; width:90%; max-width:500px; border-radius:12px;">
                        <div class="modal-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
                            <h3 style="margin:0;" id="modal-item-titulo">â• Adicionar Item</h3>
                            <button type="button" id="modal-item-close" class="btn" style="font-size:20px; padding:4px 12px;">âœ–</button>
                        </div>
                        
                        <div class="modal-body">
                            <div class="form-group" style="margin-bottom:12px;">
                                <label for="item-nome" style="display:block; margin-bottom:4px; font-weight:bold;">Nome do Item *</label>
                                <input type="text" id="item-nome" style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; box-sizing:border-box;" placeholder="Ex: Espada Longa" required>
                            </div>
                            
                            <div class="form-group" style="margin-bottom:12px;">
                                <label for="item-categoria" style="display:block; margin-bottom:4px; font-weight:bold;">Categoria *</label>
                                <select id="item-categoria" style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; box-sizing:border-box;" required>
                                    <option value="armas">âš”ï¸ Armas</option>
                                    <option value="itens-comuns">ğŸ”§ Itens Comuns</option>
                                    <option value="itens-raca">ğŸ‘¥ Itens de RaÃ§a</option>
                                    <option value="itens-classe">âš”ï¸ Itens de Classe</option>
                                    <option value="itens-origem">ğŸŒ Itens de Origem</option>
                                </select>
                            </div>
                            
                            <div class="form-group" style="margin-bottom:12px;">
                                <label for="item-peso" style="display:block; margin-bottom:4px; font-weight:bold;">Peso (espaÃ§os) *</label>
                                <input type="number" id="item-peso" min="0" step="0.5" value="1" style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; box-sizing:border-box;" required>
                            </div>
                            
                            <div class="form-group" style="margin-bottom:12px;">
                                <label for="item-funcao" style="display:block; margin-bottom:4px; font-weight:bold;">FunÃ§Ã£o/DescriÃ§Ã£o</label>
                                <textarea id="item-funcao" rows="3" style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; box-sizing:border-box; resize:vertical;" placeholder="Descreva a funÃ§Ã£o ou propriedades do item..."></textarea>
                            </div>
                        </div>
                        
                        <div class="modal-footer" style="display:flex; justify-content:flex-end; gap:8px; margin-top:16px;">
                            <button type="button" id="modal-item-cancelar" class="btn btn-secondary">Cancelar</button>
                            <button type="button" id="modal-item-salvar" class="btn btn-primary">Salvar Item</button>
                        </div>
                    </div>
                </div>

                <div id="page-habilidades" class="page">
                    <div class="page-header">
                        <h2>âœ¨ Habilidades</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de Habilidades em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-magias" class="page">
                    <div class="page-header">
                        <h2>ğŸ”® Magias</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de Magias em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-armas" class="page">
                    <div class="page-header">
                        <h2>âš”ï¸ Armas</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de Armas em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-itens" class="page">
                    <div class="page-header">
                        <h2>ğŸ’ Itens</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de Itens em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-criacao-personagens" class="page">
                    <div class="page-header">
                        <h2>ğŸ‘¤ CriaÃ§Ã£o de Personagens</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de CriaÃ§Ã£o de Personagens em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-criacao-mapas" class="page">
                    <div class="page-header">
                        <h2>ğŸ—ºï¸ CriaÃ§Ã£o de Mapas</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de CriaÃ§Ã£o de Mapas em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-musicas-sons" class="page">
                    <div class="page-header">
                        <h2>ğŸµ MÃºsicas e Sons</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de MÃºsicas e Sons em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-jogos" class="page">
                    <div class="page-header">
                        <h2>ğŸ® Jogos</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de Jogos em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-mecanicas" class="page">
                    <div class="page-header">
                        <h2>âš™ï¸ MecÃ¢nicas</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de MecÃ¢nicas em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-efeitos" class="page">
                    <div class="page-header">
                        <h2>ğŸ’« Efeitos</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de Efeitos em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-bestiario" class="page">
                    <div class="page-header">
                        <h2>ğŸ‰ BestiÃ¡rio</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de BestiÃ¡rio em desenvolvimento...</p>
                    </div>
                </div>

                <div id="page-materiais" class="page">
                    <div class="page-header">
                        <h2>ğŸ“¦ Materiais</h2>
                    </div>
                    <div class="page-placeholder">
                        <p>SeÃ§Ã£o de Materiais em desenvolvimento...</p>
                    </div>
                </div>
            </main>
        </div>

        <!-- Modal de ConfirmaÃ§Ã£o de Limpeza Total -->
        <div id="modal-confirmar-limpar" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 450px;">
                <div class="modal-header">
                    <h3>âš ï¸ Confirmar Limpeza Total</h3>
                </div>
                <div class="modal-body">
                    <p style="margin-bottom: 12px;">Deseja realmente limpar <strong>TUDO</strong> da ficha?</p>
                    <p style="margin-bottom: 8px;">Esta aÃ§Ã£o remove:</p>
                    <ul style="margin: 8px 0 12px 20px; text-align: left;">
                        <li>Atributos</li>
                        <li>PerÃ­cias</li>
                        <li>Classe, RaÃ§a e Origem</li>
                        <li>NÃ­vel</li>
                        <li>InventÃ¡rio</li>
                        <li>EstatÃ­sticas</li>
                    </ul>
                    <p style="color: #d32; font-weight: bold;">âš ï¸ Esta aÃ§Ã£o nÃ£o pode ser desfeita!</p>
                </div>
                <div class="modal-footer">
                    <button type="button" id="modal-limpar-cancelar" class="btn btn-secondary">Cancelar</button>
                    <button type="button" id="modal-limpar-confirmar" class="btn btn-danger">Limpar Tudo</button>
                </div>
            </div>
        </div>

               <script src="cordova.js"></script>
               <script src="js/data-loader.js"></script>
               <script src="js/api.js"></script>
               <script src="js/atributos.js"></script>
               <script src="js/pericias.js"></script>
               <script src="js/router.js"></script>
               <script src="js/index.js"></script>
    </body>
</html>
